{"_path":"/articles/beginner-to-advance-nodejs-1-6","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"libuv & async IO in Node.js","description":"If you read Node.js's definition, it mentions an event-driven architecture and its ability to handle asynchronous I/O. These two concepts are crucial to understand, so take your time to read and grasp them thoroughly. We know JavaScript is a synchronous, single-threaded language, meaning the code runs in one direction like a one-way road, with one task executing at a time.","slidesUrl":"https://github.com/AherRahul/portfolio-v1/blob/main/content/articles","dateModified":"2025-04-10","datePublished":"2025-04-10","showOnArticles":false,"courseName":"01-beginner-to-advance-nodejs","topics":["nodejs","javascript"],"readingTime":{"text":"6 min read","minutes":5.11,"time":306600,"words":1022},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://res.cloudinary.com/duojkrgue/image/upload/v1757930703/Portfolio/nodeJsCourse/6.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you read Node.js's definition, it mentions an event-driven architecture and its ability to handle asynchronous I/O. These two concepts are crucial to understand, so take your time to read and grasp them thoroughly. We know JavaScript is a synchronous, single-threaded language, meaning the code runs in one direction like a one-way road, with one task executing at a time. JavaScript code executes line by line, which is what makes it synchronous and single-threaded."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/public/images/blogs/2.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"synchronous-vs-asynchronous-code"},"children":[{"type":"text","value":"Synchronous vs Asynchronous Code"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Imagine a restaurant where you can get Coke, pizza, and noodles, which take 0 minutes, 10 minutes, and 5 minutes to prepare, respectively. Now, picture a line of 5 people (A, B, C, D, E) waiting to order. In a synchronous way, Person A orders Coke and gets it instantly. Person B orders noodles, taking 5 minutes. Person C, who wants pizza, has to wait 5 minutes before even placing the order, then waits another 10 minutes for the pizza. Meanwhile, Person D, who only wants a Coke, ends up waiting unnecessarily. This is how synchronous code works: one task at a time, causing delays."}]},{"type":"element","tag":"h3","props":{"id":"asynchronous-way-of-running-things"},"children":[{"type":"text","value":"Asynchronous Way of Running Things"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In an asynchronous way, tasks that take time (like preparing pizza or noodles) are handled separately, allowing the restaurant to serve quick orders (like Coke) immediately. So, A gets Coke instantly, while B and C (who ordered pizza and noodles) are moved to a different queue to wait. Meanwhile, D, who also wants Coke, gets served right away. This prevents unnecessary waiting. The completion of B and C's orders depends on the preparation time. Asynchronous operations in Node.js prevent blocking, improving efficiency, especially for quick tasks. JS Engines loves synchronous code because it can run that code in milliseconds. we will see some examples soon."}]},{"type":"element","tag":"h3","props":{"id":"how-synchronous-code-runs-in-the-js-engine"},"children":[{"type":"text","value":"How synchronous code runs in the JS engine?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The JS engine has components like the Call Stack, Garbage Collector, and Memory Heap. These aren't machines or hardware; they are just C++ code. When you run a code like "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"var a = 10;"}]},{"type":"text","value":", it executes in the Global Execution Context, which is created in a synchronous, single-threaded manner. When a function is called, a new execution context is created for that function, and the code runs. Let me give you an example to explain it further."}]},{"type":"element","tag":"pre","props":{"className":"language-jsx shiki shiki-themes vitesse-dark","code":"var a=102;\nvar b=209;\n\nfunction multiply(x,y){\n  const  result= x*y\n  return result;\n}\n\nvar c= multiply(a,b)\n","language":"jsx","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CB7676"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":" a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C9A91"},"children":[{"type":"text","value":"102"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CB7676"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":" b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C9A91"},"children":[{"type":"text","value":"209"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CB7676"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#80A665"},"children":[{"type":"text","value":" multiply"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CB7676"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":"  result"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":" x"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CB7676"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":"y\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4D9375"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":" result"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CB7676"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":" c"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#80A665"},"children":[{"type":"text","value":" multiply"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BD976A"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#666666"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When the JS engine executes code, it goes through several steps, such as parsing and tokenization. The compiler and scope work together during this phase. For example, when the compiler sees variables "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"a"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"b"}]},{"type":"text","value":", it checks with the scope if they exist. If not, they are declared and assigned values. This process occurs in the Global Execution Context within the Call Stack. When a function is called, a new execution context is created, runs, and then is popped off the stack. For more details, you can learn from blogs or videos by Akshay Saini on YouTube."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://heyashu.in/images/blogs/4.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"how-asynchronous-code-runs-in-the-js-engine"},"children":[{"type":"text","value":"How Asynchronous Code Runs in the JS Engine"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://heyashu.in/images/blogs/5.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let me tell you something: JavaScript isn't just limited to running code. As a scripting language, it has many tasks it's not inherently capable of handling, such as interacting with the outside world, accessing files, or databases. A great example is managing time with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setTimeout"}]},{"type":"text","value":"—this isn't actually a feature of JavaScript itself. Really? Yes! The JS engine can't inherently wait; it's not designed for that. The JS engine's responsibility is simply to take JavaScript code and convert it, that's it—no time management or other logic involved."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's where Node.js comes into play with its superpowers. Node.js can execute timers, read files from the OS, access databases, connect to servers, and make internet requests. When all these operations are ready, only the JavaScript code runs on the V8 engine. These superpowers are managed by and connected to the V8 engine through libuv. Yes, my friend, libuv! Whenever a request for file access, an internet call, or a timer comes in, it goes to libuv, which communicates with the OS and then gets back to the V8 engine. And work is done by Js v8 engine in the callstack."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In simple terms, this is how Node.js operates."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://heyashu.in/images/blogs/6.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"what-is-libuv-the-superhero"},"children":[{"type":"text","value":"What is libuv the Superhero"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"libuv is a C library that provides Node.js with an event-driven, asynchronous I/O model. It helps manage tasks like file reading, writing, networking, and timers in a non-blocking way, making it possible for Node.js to handle many tasks simultaneously without slowing down. Essentially, Libuv is what enables Node.js to be fast and efficient, handling multiple operations at once without waiting for each to finish. Libuv acts as a middleware b/w JS engine and Operating System. Libuv has thread pool and event loop will discuss in later blogs. just know if anything comes async or engine can’t handle it ask libuv to do it. find the libuv exact link to check the code of it written in c for your reference. actually libuv does so many things."}]},{"type":"element","tag":"h3","props":{"id":"nodejs-is-asynchronous"},"children":[{"type":"text","value":"Node.js is Asynchronous"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If someone asks about Node.js behavior, tell them Node.js is overall asynchronous. However, V8, which is its JavaScript engine, operates synchronously. Node.js gains its asynchronous nature from superpowers like "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"libuv"}]},{"type":"text","value":", which enables non-blocking I/O operations. This is why Node.js is known for its non-blocking behavior, allowing I/O operations to be performed asynchronously. And don't forget to give a shoutout to the creator of Node.js, Ryan Dahl!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And that's all for this episode!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'm Ashutosh Anand Tiwari, and I'm writing digital notes on Node.js. If you enjoy these notes, please share them with your friends. If you find any errors or have improvements, feel free to contribute by "},{"type":"element","tag":"a","props":{"href":"https://heyashu.in/admin"},"children":[{"type":"text","value":"visiting this link."}]},{"type":"text","value":" If you're interested in writing the next episode's notes, "},{"type":"element","tag":"a","props":{"href":"https://heyashu.in/admin"},"children":[{"type":"text","value":"visit this link"}]},{"type":"text","value":". Let's learn together! Also, please consider giving a star to "},{"type":"element","tag":"a","props":{"href":"https://github.com/ashumsd7/heyashu/tree/main/src/data"},"children":[{"type":"text","value":"this repo"}]},{"type":"text","value":". For any queries, "},{"type":"element","tag":"a","props":{"href":"https://topmate.io/aat/1148709/pay"},"children":[{"type":"text","value":"let's connect here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"new-words-to-search"},"children":[{"type":"text","value":"New words to search"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"IO"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Async and sync"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Garbage collector"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Libuv"}]}]},{"type":"element","tag":"h3","props":{"id":"questions-queries-to-research"},"children":[{"type":"text","value":"Questions / Queries to research"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Read the C code of libuv"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"How garbage collector works in JavaScript ?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Find the code of Garbage collector in Node Js github repo."}]}]},{"type":"element","tag":"h3","props":{"id":"useful-tips"},"children":[{"type":"text","value":"Useful Tips"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Node Js is asynchronousd and Js engine in syncronous,"}]}]},{"type":"element","tag":"h3","props":{"id":"useful-links"},"children":[{"type":"text","value":"Useful links"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/nodejs/node/tree/main/deps/uv"},"children":[{"type":"text","value":"https://github.com/nodejs/node/tree/main/deps/uv"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://heyashu.in/images/blogs/7.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Thank you so much for reading. If you found it valuable, consider subscribing for more such content every week. If you have any questions or suggestions, please email me your comments or feel free to improve it."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"synchronous-vs-asynchronous-code","depth":3,"text":"Synchronous vs Asynchronous Code"},{"id":"asynchronous-way-of-running-things","depth":3,"text":"Asynchronous Way of Running Things"},{"id":"how-synchronous-code-runs-in-the-js-engine","depth":3,"text":"How synchronous code runs in the JS engine?"},{"id":"how-asynchronous-code-runs-in-the-js-engine","depth":3,"text":"How Asynchronous Code Runs in the JS Engine"},{"id":"what-is-libuv-the-superhero","depth":3,"text":"What is libuv the Superhero"},{"id":"nodejs-is-asynchronous","depth":3,"text":"Node.js is Asynchronous"},{"id":"new-words-to-search","depth":3,"text":"New words to search"},{"id":"questions-queries-to-research","depth":3,"text":"Questions / Queries to research"},{"id":"useful-tips","depth":3,"text":"Useful Tips"},{"id":"useful-links","depth":3,"text":"Useful links"}]}},"_type":"markdown","_id":"content:articles:beginner-to-advance-nodejs-1-6.md","_source":"content","_file":"articles/beginner-to-advance-nodejs-1-6.md","_stem":"articles/beginner-to-advance-nodejs-1-6","_extension":"md","sitemap":{"loc":"/articles/beginner-to-advance-nodejs-1-6"}}