[{"data":1,"prerenderedAt":1566},["ShallowReactive",2],{"content-query-EqC9frhHXG":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"slidesUrl":10,"dateModified":11,"datePublished":11,"showOnArticles":6,"courseName":12,"topics":13,"readingTime":16,"body":21,"_type":166,"_id":1560,"_source":1561,"_file":1562,"_stem":1563,"_extension":1564,"sitemap":1565},"/articles/frontend-system-design-2-3","articles",false,"","Web Socket","Discover the power of Web Sockets. Learn to establish persistent connections facilitating real-time, bidirectional communication between clients and servers, enhancing interactivity and responsiveness in frontend applications.","https://github.com/AherRahul/portfolio-v1/blob/main/content/articles","2025-03-08","02-frontend-system-design",[14,15],"nodejs","javascript",{"text":17,"minutes":18,"time":19,"words":20},"6 min read",5.425,325500,1085,{"type":22,"children":23,"toc":1549},"root",[24,35,41,46,53,66,71,78,83,107,112,124,143,161,238,254,283,289,294,899,905,910,916,935,1000,1005,1012,1017,1260,1295,1301,1319,1326,1331,1338,1343,1378,1383,1389,1417,1423,1474,1479,1484,1523,1528,1533,1538,1543],{"type":25,"tag":26,"props":27,"children":28},"element","p",{},[29],{"type":25,"tag":30,"props":31,"children":34},"img",{"alt":32,"src":33},"image.png","https://res.cloudinary.com/duojkrgue/image/upload/v1744108685/Portfolio/FrontendSystemDesignCourse/8_botlhe.png",[],{"type":25,"tag":26,"props":36,"children":37},{},[38],{"type":39,"value":40},"text","Let‚Äôs learn about WebSockets. This is another way to communicate from the client to the server, just like short polling and long polling, but it is more commonly used. It supports full-duplex communication. Now you might wonder, what is full-duplex? Full-duplex means data can be transmitted in both directions simultaneously‚Äîboth parties can send data to each other without any interruption. Here, the parties are the backend and the frontend, or the client and the server.",{"type":25,"tag":26,"props":42,"children":43},{},[44],{"type":39,"value":45},"Unlike short polling and long polling, which rely on HTTP, WebSockets are a completely different technology. It works based on a single, live TCP connection, allowing continuous and bidirectional communication.",{"type":25,"tag":26,"props":47,"children":48},{},[49],{"type":25,"tag":30,"props":50,"children":52},{"alt":32,"src":51},"https://heyashu.in/images/blogs/ws_2.png",[],{"type":25,"tag":26,"props":54,"children":55},{},[56,58,64],{"type":39,"value":57},"The first handshake happens over an HTTP connection, which is then upgraded to WebSockets using the ",{"type":25,"tag":59,"props":60,"children":61},"strong",{},[62],{"type":39,"value":63},"101 Switching Protocols",{"type":39,"value":65}," method. After this, a new connection is established, and a long-lived TCP connection is maintained. This connection stays open until it is explicitly closed from either the backend or the frontend. During this time, bidirectional data flows continuously.",{"type":25,"tag":26,"props":67,"children":68},{},[69],{"type":39,"value":70},"We will discuss all of this in detail, but first, let‚Äôs build something and see it in action.",{"type":25,"tag":72,"props":73,"children":75},"h3",{"id":74},"code",[76],{"type":39,"value":77},"Code",{"type":25,"tag":26,"props":79,"children":80},{},[81],{"type":39,"value":82},"We‚Äôve built a simple chat UI with an input box, a send button, and a section to display messages. However, there are two key problems we need to solve:",{"type":25,"tag":84,"props":85,"children":86},"ul",{},[87,93],{"type":25,"tag":88,"props":89,"children":90},"li",{},[91],{"type":39,"value":92},"When we type a message, it should be sent to the server.",{"type":25,"tag":88,"props":94,"children":95},{},[96,98,105],{"type":39,"value":97},"Anyone who has opened ",{"type":25,"tag":99,"props":100,"children":102},"a",{"href":101},"http://localhost:3000/",[103],{"type":39,"value":104},"localhost:3000",{"type":39,"value":106}," should receive the new message without reloading the page. This is the essence of a duplex connection. Messages should flow seamlessly between clients. If someone types a message, it should appear on my screen, and vice versa.",{"type":25,"tag":26,"props":108,"children":109},{},[110],{"type":39,"value":111},"How will we make this possible?",{"type":25,"tag":72,"props":113,"children":115},{"id":114},"socketio-websockets",[116,122],{"type":25,"tag":99,"props":117,"children":119},{"href":118},"http://socket.io/",[120],{"type":39,"value":121},"Socket.io",{"type":39,"value":123}," / WebSockets",{"type":25,"tag":26,"props":125,"children":126},{},[127,129,133,135,141],{"type":39,"value":128},"We are going to use ",{"type":25,"tag":59,"props":130,"children":131},{},[132],{"type":39,"value":121},{"type":39,"value":134},", a technology designed for bidirectional and low-latency communication across platforms. You can read the documentation by ",{"type":25,"tag":99,"props":136,"children":138},{"href":137},"https://socket.io/",[139],{"type":39,"value":140},"clicking here",{"type":39,"value":142},".",{"type":25,"tag":26,"props":144,"children":145},{},[146,148,154,156,160],{"type":39,"value":147},"Remember, WebSocket is also available as an ",{"type":25,"tag":99,"props":149,"children":151},{"href":150},"https://www.npmjs.com/package/websocket",[152],{"type":39,"value":153},"NPM library",{"type":39,"value":155},", but here we‚Äôll implement this using ",{"type":25,"tag":99,"props":157,"children":158},{"href":118},[159],{"type":39,"value":121},{"type":39,"value":142},{"type":25,"tag":162,"props":163,"children":167},"pre",{"className":164,"code":165,"language":166,"meta":7,"style":7},"language-markdown shiki shiki-themes vitesse-dark","git clone https://github.com/ashumsd7/web-communication-techniques.git\ncd web-communication-techniques\nnpm i\nnpm run web socket\n-------------------\nOpen browser and type\nhttp://localhost:3000/ // Observe network tab\n","markdown",[168],{"type":25,"tag":74,"props":169,"children":170},{"__ignoreMap":7},[171,183,192,201,210,220,229],{"type":25,"tag":172,"props":173,"children":176},"span",{"class":174,"line":175},"line",1,[177],{"type":25,"tag":172,"props":178,"children":180},{"style":179},"--shiki-default:#DBD7CAEE",[181],{"type":39,"value":182},"git clone https://github.com/ashumsd7/web-communication-techniques.git\n",{"type":25,"tag":172,"props":184,"children":186},{"class":174,"line":185},2,[187],{"type":25,"tag":172,"props":188,"children":189},{"style":179},[190],{"type":39,"value":191},"cd web-communication-techniques\n",{"type":25,"tag":172,"props":193,"children":195},{"class":174,"line":194},3,[196],{"type":25,"tag":172,"props":197,"children":198},{"style":179},[199],{"type":39,"value":200},"npm i\n",{"type":25,"tag":172,"props":202,"children":204},{"class":174,"line":203},4,[205],{"type":25,"tag":172,"props":206,"children":207},{"style":179},[208],{"type":39,"value":209},"npm run web socket\n",{"type":25,"tag":172,"props":211,"children":213},{"class":174,"line":212},5,[214],{"type":25,"tag":172,"props":215,"children":217},{"style":216},"--shiki-default:#4D9375;--shiki-default-font-weight:bold",[218],{"type":39,"value":219},"-------------------\n",{"type":25,"tag":172,"props":221,"children":223},{"class":174,"line":222},6,[224],{"type":25,"tag":172,"props":225,"children":226},{"style":179},[227],{"type":39,"value":228},"Open browser and type\n",{"type":25,"tag":172,"props":230,"children":232},{"class":174,"line":231},7,[233],{"type":25,"tag":172,"props":234,"children":235},{"style":179},[236],{"type":39,"value":237},"http://localhost:3000/ // Observe network tab\n",{"type":25,"tag":26,"props":239,"children":240},{},[241,243,252],{"type":39,"value":242},"After installing all the dependencies, you can close the repo. Then, go to this URL: ",{"type":25,"tag":59,"props":244,"children":245},{},[246],{"type":25,"tag":99,"props":247,"children":249},{"href":248},"http://localhost/",[250],{"type":39,"value":251},"localhost",{"type":39,"value":253},", and your application will be running after executing the following command:",{"type":25,"tag":162,"props":255,"children":259},{"className":256,"code":257,"language":258,"meta":7,"style":7},"language-bash shiki shiki-themes vitesse-dark","npm run web-sockets\n","bash",[260],{"type":25,"tag":74,"props":261,"children":262},{"__ignoreMap":7},[263],{"type":25,"tag":172,"props":264,"children":265},{"class":174,"line":175},[266,272,278],{"type":25,"tag":172,"props":267,"children":269},{"style":268},"--shiki-default:#80A665",[270],{"type":39,"value":271},"npm",{"type":25,"tag":172,"props":273,"children":275},{"style":274},"--shiki-default:#C98A7D",[276],{"type":39,"value":277}," run",{"type":25,"tag":172,"props":279,"children":280},{"style":274},[281],{"type":39,"value":282}," web-sockets\n",{"type":25,"tag":72,"props":284,"children":286},{"id":285},"server-code",[287],{"type":39,"value":288},"Server Code",{"type":25,"tag":26,"props":290,"children":291},{},[292],{"type":39,"value":293},"If you‚Äôve already installed and run your application, you should be familiar with everything. But if not, here‚Äôs the backend code. The backend handles the WebSocket connection to send and receive messages.",{"type":25,"tag":162,"props":295,"children":299},{"className":296,"code":297,"language":298,"meta":7,"style":7},"language-jsx shiki shiki-themes vitesse-dark","const server = http.createServer(app);\n\n// Step 0 : import socket.io\nconst { Server } = require(\"socket.io\");\n// creating Instance of socket.io\nconst io = new Server(server);\n\n// Step1 : when connection is established\nio.on(\"connection\", (socket) => {\n  console.log(\"üöÄ Connection Established\");\n\n  // Step1a : when we receive a message : Listening for the event\n  socket.on(\"chat-message\", (message) => {\n    console.log(\"üöÄ Message Received\", message);\n    // Step1aa : emit the message to all connected clients : Broadcasting the message\n    io.emit(\"chat-message\", message);\n  });\n\n  // Step1b : when connection is disconnected\n  socket.on(\"disconnect\", () => {\n    console.log(\"üöÄ Disconnected\");\n  });\n});\n","jsx",[300],{"type":25,"tag":74,"props":301,"children":302},{"__ignoreMap":7},[303,353,362,371,425,433,471,478,487,552,591,599,608,667,714,723,769,778,786,795,845,882,890],{"type":25,"tag":172,"props":304,"children":305},{"class":174,"line":175},[306,312,318,324,329,333,338,343,348],{"type":25,"tag":172,"props":307,"children":309},{"style":308},"--shiki-default:#CB7676",[310],{"type":39,"value":311},"const",{"type":25,"tag":172,"props":313,"children":315},{"style":314},"--shiki-default:#BD976A",[316],{"type":39,"value":317}," server",{"type":25,"tag":172,"props":319,"children":321},{"style":320},"--shiki-default:#666666",[322],{"type":39,"value":323}," =",{"type":25,"tag":172,"props":325,"children":326},{"style":314},[327],{"type":39,"value":328}," http",{"type":25,"tag":172,"props":330,"children":331},{"style":320},[332],{"type":39,"value":142},{"type":25,"tag":172,"props":334,"children":335},{"style":268},[336],{"type":39,"value":337},"createServer",{"type":25,"tag":172,"props":339,"children":340},{"style":320},[341],{"type":39,"value":342},"(",{"type":25,"tag":172,"props":344,"children":345},{"style":314},[346],{"type":39,"value":347},"app",{"type":25,"tag":172,"props":349,"children":350},{"style":320},[351],{"type":39,"value":352},");\n",{"type":25,"tag":172,"props":354,"children":355},{"class":174,"line":185},[356],{"type":25,"tag":172,"props":357,"children":359},{"emptyLinePlaceholder":358},true,[360],{"type":39,"value":361},"\n",{"type":25,"tag":172,"props":363,"children":364},{"class":174,"line":194},[365],{"type":25,"tag":172,"props":366,"children":368},{"style":367},"--shiki-default:#758575DD",[369],{"type":39,"value":370},"// Step 0 : import socket.io\n",{"type":25,"tag":172,"props":372,"children":373},{"class":174,"line":203},[374,378,383,388,393,397,402,406,412,417,421],{"type":25,"tag":172,"props":375,"children":376},{"style":308},[377],{"type":39,"value":311},{"type":25,"tag":172,"props":379,"children":380},{"style":320},[381],{"type":39,"value":382}," {",{"type":25,"tag":172,"props":384,"children":385},{"style":314},[386],{"type":39,"value":387}," Server",{"type":25,"tag":172,"props":389,"children":390},{"style":320},[391],{"type":39,"value":392}," }",{"type":25,"tag":172,"props":394,"children":395},{"style":320},[396],{"type":39,"value":323},{"type":25,"tag":172,"props":398,"children":399},{"style":268},[400],{"type":39,"value":401}," require",{"type":25,"tag":172,"props":403,"children":404},{"style":320},[405],{"type":39,"value":342},{"type":25,"tag":172,"props":407,"children":409},{"style":408},"--shiki-default:#C98A7D77",[410],{"type":39,"value":411},"\"",{"type":25,"tag":172,"props":413,"children":414},{"style":274},[415],{"type":39,"value":416},"socket.io",{"type":25,"tag":172,"props":418,"children":419},{"style":408},[420],{"type":39,"value":411},{"type":25,"tag":172,"props":422,"children":423},{"style":320},[424],{"type":39,"value":352},{"type":25,"tag":172,"props":426,"children":427},{"class":174,"line":212},[428],{"type":25,"tag":172,"props":429,"children":430},{"style":367},[431],{"type":39,"value":432},"// creating Instance of socket.io\n",{"type":25,"tag":172,"props":434,"children":435},{"class":174,"line":222},[436,440,445,449,454,458,462,467],{"type":25,"tag":172,"props":437,"children":438},{"style":308},[439],{"type":39,"value":311},{"type":25,"tag":172,"props":441,"children":442},{"style":314},[443],{"type":39,"value":444}," io",{"type":25,"tag":172,"props":446,"children":447},{"style":320},[448],{"type":39,"value":323},{"type":25,"tag":172,"props":450,"children":451},{"style":308},[452],{"type":39,"value":453}," new",{"type":25,"tag":172,"props":455,"children":456},{"style":268},[457],{"type":39,"value":387},{"type":25,"tag":172,"props":459,"children":460},{"style":320},[461],{"type":39,"value":342},{"type":25,"tag":172,"props":463,"children":464},{"style":314},[465],{"type":39,"value":466},"server",{"type":25,"tag":172,"props":468,"children":469},{"style":320},[470],{"type":39,"value":352},{"type":25,"tag":172,"props":472,"children":473},{"class":174,"line":231},[474],{"type":25,"tag":172,"props":475,"children":476},{"emptyLinePlaceholder":358},[477],{"type":39,"value":361},{"type":25,"tag":172,"props":479,"children":481},{"class":174,"line":480},8,[482],{"type":25,"tag":172,"props":483,"children":484},{"style":367},[485],{"type":39,"value":486},"// Step1 : when connection is established\n",{"type":25,"tag":172,"props":488,"children":490},{"class":174,"line":489},9,[491,496,500,505,509,513,518,522,527,532,537,542,547],{"type":25,"tag":172,"props":492,"children":493},{"style":314},[494],{"type":39,"value":495},"io",{"type":25,"tag":172,"props":497,"children":498},{"style":320},[499],{"type":39,"value":142},{"type":25,"tag":172,"props":501,"children":502},{"style":268},[503],{"type":39,"value":504},"on",{"type":25,"tag":172,"props":506,"children":507},{"style":320},[508],{"type":39,"value":342},{"type":25,"tag":172,"props":510,"children":511},{"style":408},[512],{"type":39,"value":411},{"type":25,"tag":172,"props":514,"children":515},{"style":274},[516],{"type":39,"value":517},"connection",{"type":25,"tag":172,"props":519,"children":520},{"style":408},[521],{"type":39,"value":411},{"type":25,"tag":172,"props":523,"children":524},{"style":320},[525],{"type":39,"value":526},",",{"type":25,"tag":172,"props":528,"children":529},{"style":320},[530],{"type":39,"value":531}," (",{"type":25,"tag":172,"props":533,"children":534},{"style":314},[535],{"type":39,"value":536},"socket",{"type":25,"tag":172,"props":538,"children":539},{"style":320},[540],{"type":39,"value":541},")",{"type":25,"tag":172,"props":543,"children":544},{"style":320},[545],{"type":39,"value":546}," =>",{"type":25,"tag":172,"props":548,"children":549},{"style":320},[550],{"type":39,"value":551}," {\n",{"type":25,"tag":172,"props":553,"children":555},{"class":174,"line":554},10,[556,561,565,570,574,578,583,587],{"type":25,"tag":172,"props":557,"children":558},{"style":314},[559],{"type":39,"value":560},"  console",{"type":25,"tag":172,"props":562,"children":563},{"style":320},[564],{"type":39,"value":142},{"type":25,"tag":172,"props":566,"children":567},{"style":268},[568],{"type":39,"value":569},"log",{"type":25,"tag":172,"props":571,"children":572},{"style":320},[573],{"type":39,"value":342},{"type":25,"tag":172,"props":575,"children":576},{"style":408},[577],{"type":39,"value":411},{"type":25,"tag":172,"props":579,"children":580},{"style":274},[581],{"type":39,"value":582},"üöÄ Connection Established",{"type":25,"tag":172,"props":584,"children":585},{"style":408},[586],{"type":39,"value":411},{"type":25,"tag":172,"props":588,"children":589},{"style":320},[590],{"type":39,"value":352},{"type":25,"tag":172,"props":592,"children":594},{"class":174,"line":593},11,[595],{"type":25,"tag":172,"props":596,"children":597},{"emptyLinePlaceholder":358},[598],{"type":39,"value":361},{"type":25,"tag":172,"props":600,"children":602},{"class":174,"line":601},12,[603],{"type":25,"tag":172,"props":604,"children":605},{"style":367},[606],{"type":39,"value":607},"  // Step1a : when we receive a message : Listening for the event\n",{"type":25,"tag":172,"props":609,"children":611},{"class":174,"line":610},13,[612,617,621,625,629,633,638,642,646,650,655,659,663],{"type":25,"tag":172,"props":613,"children":614},{"style":314},[615],{"type":39,"value":616},"  socket",{"type":25,"tag":172,"props":618,"children":619},{"style":320},[620],{"type":39,"value":142},{"type":25,"tag":172,"props":622,"children":623},{"style":268},[624],{"type":39,"value":504},{"type":25,"tag":172,"props":626,"children":627},{"style":320},[628],{"type":39,"value":342},{"type":25,"tag":172,"props":630,"children":631},{"style":408},[632],{"type":39,"value":411},{"type":25,"tag":172,"props":634,"children":635},{"style":274},[636],{"type":39,"value":637},"chat-message",{"type":25,"tag":172,"props":639,"children":640},{"style":408},[641],{"type":39,"value":411},{"type":25,"tag":172,"props":643,"children":644},{"style":320},[645],{"type":39,"value":526},{"type":25,"tag":172,"props":647,"children":648},{"style":320},[649],{"type":39,"value":531},{"type":25,"tag":172,"props":651,"children":652},{"style":314},[653],{"type":39,"value":654},"message",{"type":25,"tag":172,"props":656,"children":657},{"style":320},[658],{"type":39,"value":541},{"type":25,"tag":172,"props":660,"children":661},{"style":320},[662],{"type":39,"value":546},{"type":25,"tag":172,"props":664,"children":665},{"style":320},[666],{"type":39,"value":551},{"type":25,"tag":172,"props":668,"children":670},{"class":174,"line":669},14,[671,676,680,684,688,692,697,701,705,710],{"type":25,"tag":172,"props":672,"children":673},{"style":314},[674],{"type":39,"value":675},"    console",{"type":25,"tag":172,"props":677,"children":678},{"style":320},[679],{"type":39,"value":142},{"type":25,"tag":172,"props":681,"children":682},{"style":268},[683],{"type":39,"value":569},{"type":25,"tag":172,"props":685,"children":686},{"style":320},[687],{"type":39,"value":342},{"type":25,"tag":172,"props":689,"children":690},{"style":408},[691],{"type":39,"value":411},{"type":25,"tag":172,"props":693,"children":694},{"style":274},[695],{"type":39,"value":696},"üöÄ Message Received",{"type":25,"tag":172,"props":698,"children":699},{"style":408},[700],{"type":39,"value":411},{"type":25,"tag":172,"props":702,"children":703},{"style":320},[704],{"type":39,"value":526},{"type":25,"tag":172,"props":706,"children":707},{"style":314},[708],{"type":39,"value":709}," message",{"type":25,"tag":172,"props":711,"children":712},{"style":320},[713],{"type":39,"value":352},{"type":25,"tag":172,"props":715,"children":717},{"class":174,"line":716},15,[718],{"type":25,"tag":172,"props":719,"children":720},{"style":367},[721],{"type":39,"value":722},"    // Step1aa : emit the message to all connected clients : Broadcasting the message\n",{"type":25,"tag":172,"props":724,"children":726},{"class":174,"line":725},16,[727,732,736,741,745,749,753,757,761,765],{"type":25,"tag":172,"props":728,"children":729},{"style":314},[730],{"type":39,"value":731},"    io",{"type":25,"tag":172,"props":733,"children":734},{"style":320},[735],{"type":39,"value":142},{"type":25,"tag":172,"props":737,"children":738},{"style":268},[739],{"type":39,"value":740},"emit",{"type":25,"tag":172,"props":742,"children":743},{"style":320},[744],{"type":39,"value":342},{"type":25,"tag":172,"props":746,"children":747},{"style":408},[748],{"type":39,"value":411},{"type":25,"tag":172,"props":750,"children":751},{"style":274},[752],{"type":39,"value":637},{"type":25,"tag":172,"props":754,"children":755},{"style":408},[756],{"type":39,"value":411},{"type":25,"tag":172,"props":758,"children":759},{"style":320},[760],{"type":39,"value":526},{"type":25,"tag":172,"props":762,"children":763},{"style":314},[764],{"type":39,"value":709},{"type":25,"tag":172,"props":766,"children":767},{"style":320},[768],{"type":39,"value":352},{"type":25,"tag":172,"props":770,"children":772},{"class":174,"line":771},17,[773],{"type":25,"tag":172,"props":774,"children":775},{"style":320},[776],{"type":39,"value":777},"  });\n",{"type":25,"tag":172,"props":779,"children":781},{"class":174,"line":780},18,[782],{"type":25,"tag":172,"props":783,"children":784},{"emptyLinePlaceholder":358},[785],{"type":39,"value":361},{"type":25,"tag":172,"props":787,"children":789},{"class":174,"line":788},19,[790],{"type":25,"tag":172,"props":791,"children":792},{"style":367},[793],{"type":39,"value":794},"  // Step1b : when connection is disconnected\n",{"type":25,"tag":172,"props":796,"children":798},{"class":174,"line":797},20,[799,803,807,811,815,819,824,828,832,837,841],{"type":25,"tag":172,"props":800,"children":801},{"style":314},[802],{"type":39,"value":616},{"type":25,"tag":172,"props":804,"children":805},{"style":320},[806],{"type":39,"value":142},{"type":25,"tag":172,"props":808,"children":809},{"style":268},[810],{"type":39,"value":504},{"type":25,"tag":172,"props":812,"children":813},{"style":320},[814],{"type":39,"value":342},{"type":25,"tag":172,"props":816,"children":817},{"style":408},[818],{"type":39,"value":411},{"type":25,"tag":172,"props":820,"children":821},{"style":274},[822],{"type":39,"value":823},"disconnect",{"type":25,"tag":172,"props":825,"children":826},{"style":408},[827],{"type":39,"value":411},{"type":25,"tag":172,"props":829,"children":830},{"style":320},[831],{"type":39,"value":526},{"type":25,"tag":172,"props":833,"children":834},{"style":320},[835],{"type":39,"value":836}," ()",{"type":25,"tag":172,"props":838,"children":839},{"style":320},[840],{"type":39,"value":546},{"type":25,"tag":172,"props":842,"children":843},{"style":320},[844],{"type":39,"value":551},{"type":25,"tag":172,"props":846,"children":848},{"class":174,"line":847},21,[849,853,857,861,865,869,874,878],{"type":25,"tag":172,"props":850,"children":851},{"style":314},[852],{"type":39,"value":675},{"type":25,"tag":172,"props":854,"children":855},{"style":320},[856],{"type":39,"value":142},{"type":25,"tag":172,"props":858,"children":859},{"style":268},[860],{"type":39,"value":569},{"type":25,"tag":172,"props":862,"children":863},{"style":320},[864],{"type":39,"value":342},{"type":25,"tag":172,"props":866,"children":867},{"style":408},[868],{"type":39,"value":411},{"type":25,"tag":172,"props":870,"children":871},{"style":274},[872],{"type":39,"value":873},"üöÄ Disconnected",{"type":25,"tag":172,"props":875,"children":876},{"style":408},[877],{"type":39,"value":411},{"type":25,"tag":172,"props":879,"children":880},{"style":320},[881],{"type":39,"value":352},{"type":25,"tag":172,"props":883,"children":885},{"class":174,"line":884},22,[886],{"type":25,"tag":172,"props":887,"children":888},{"style":320},[889],{"type":39,"value":777},{"type":25,"tag":172,"props":891,"children":893},{"class":174,"line":892},23,[894],{"type":25,"tag":172,"props":895,"children":896},{"style":320},[897],{"type":39,"value":898},"});\n",{"type":25,"tag":72,"props":900,"children":902},{"id":901},"step-0-imports-and-creating-the-server",[903],{"type":39,"value":904},"Step 0: Imports and Creating the Server",{"type":25,"tag":26,"props":906,"children":907},{},[908],{"type":39,"value":909},"The first step is all about importing the necessary modules and creating a server.",{"type":25,"tag":72,"props":911,"children":913},{"id":912},"step-1-establishing-the-connection",[914],{"type":39,"value":915},"Step 1: Establishing the Connection",{"type":25,"tag":26,"props":917,"children":918},{},[919,921,926,928,933],{"type":39,"value":920},"When the connection is established, you‚Äôll see ",{"type":25,"tag":59,"props":922,"children":923},{},[924],{"type":39,"value":925},"\"Connection Established\"",{"type":39,"value":927}," in the console. Inside the callback function where you receive the ",{"type":25,"tag":74,"props":929,"children":931},{"className":930},[],[932],{"type":39,"value":536},{"type":39,"value":934}," as a parameter, you can listen for messages.",{"type":25,"tag":84,"props":936,"children":937},{},[938,964,982],{"type":25,"tag":88,"props":939,"children":940},{},[941,946,948,954,956,962],{"type":25,"tag":59,"props":942,"children":943},{},[944],{"type":39,"value":945},"Step 1a:",{"type":39,"value":947}," Use ",{"type":25,"tag":74,"props":949,"children":951},{"className":950},[],[952],{"type":39,"value":953},"socket.on('chat-message')",{"type":39,"value":955}," to listen for the ",{"type":25,"tag":74,"props":957,"children":959},{"className":958},[],[960],{"type":39,"value":961},"'chat-message'",{"type":39,"value":963}," event. This event name should be the same on the client side while sending the message. We‚Äôll see that client-side code soon.",{"type":25,"tag":88,"props":965,"children":966},{},[967,972,974,980],{"type":25,"tag":59,"props":968,"children":969},{},[970],{"type":39,"value":971},"Step 1aa:",{"type":39,"value":973}," Once you receive the message, you can broadcast it to all connected clients using ",{"type":25,"tag":74,"props":975,"children":977},{"className":976},[],[978],{"type":39,"value":979},"socket.emit()",{"type":39,"value":981},". This ensures that every client gets notified of the new message.",{"type":25,"tag":88,"props":983,"children":984},{},[985,990,992,998],{"type":25,"tag":59,"props":986,"children":987},{},[988],{"type":39,"value":989},"Step 1b:",{"type":39,"value":991}," Finally, handle the disconnection using ",{"type":25,"tag":74,"props":993,"children":995},{"className":994},[],[996],{"type":39,"value":997},"socket.on('disconnect')",{"type":39,"value":999},". This will trigger when a connection gets disconnected.",{"type":25,"tag":26,"props":1001,"children":1002},{},[1003],{"type":39,"value":1004},"Now, let‚Äôs see how it works on the frontend.",{"type":25,"tag":26,"props":1006,"children":1007},{},[1008],{"type":25,"tag":30,"props":1009,"children":1011},{"alt":32,"src":1010},"https://heyashu.in/images/blogs/ws_3.png",[],{"type":25,"tag":26,"props":1013,"children":1014},{},[1015],{"type":39,"value":1016},"Now, let's dive into the code and understand the core logic of WebSockets.",{"type":25,"tag":162,"props":1018,"children":1022},{"className":1019,"code":1020,"language":1021,"meta":7,"style":7},"language-html shiki shiki-themes vitesse-dark","const socket = io();\n\n    console.log(\"üöÄ Socket From frontend\", socket);\n\n    function sendMessage() {\n      const message = messageInput.value.trim();\n      if (message) {\n        console.log('Sending message:', message);\n        // emiting message to the server\n        socket.emit(\"chat-message\", message);\n        // Add message to messages div\n  \n      }\n    }\n\n    // listening for the message from the server :auto receive the message\n    socket.on(\"chat-message\", (message) => {\n      console.log(\"üöÄ Message Received From Server\", message);\n      // Add message to messages div\n      const messageElement = document.createElement('div');\n      messageElement.className = 'message';\n      messageElement.textContent = message;\n      messagesDiv.appendChild(messageElement);\n      // Auto scroll to bottom\n      messagesDiv.scrollTop = messagesDiv.scrollHeight;\n\n      // Clear input\n      messageInput.value = '';\n    });\n","html",[1023],{"type":25,"tag":74,"props":1024,"children":1025},{"__ignoreMap":7},[1026,1034,1041,1049,1056,1064,1072,1080,1088,1096,1104,1112,1120,1128,1136,1143,1151,1159,1167,1175,1183,1191,1199,1207,1216,1225,1233,1242,1251],{"type":25,"tag":172,"props":1027,"children":1028},{"class":174,"line":175},[1029],{"type":25,"tag":172,"props":1030,"children":1031},{"style":179},[1032],{"type":39,"value":1033},"const socket = io();\n",{"type":25,"tag":172,"props":1035,"children":1036},{"class":174,"line":185},[1037],{"type":25,"tag":172,"props":1038,"children":1039},{"emptyLinePlaceholder":358},[1040],{"type":39,"value":361},{"type":25,"tag":172,"props":1042,"children":1043},{"class":174,"line":194},[1044],{"type":25,"tag":172,"props":1045,"children":1046},{"style":179},[1047],{"type":39,"value":1048},"    console.log(\"üöÄ Socket From frontend\", socket);\n",{"type":25,"tag":172,"props":1050,"children":1051},{"class":174,"line":203},[1052],{"type":25,"tag":172,"props":1053,"children":1054},{"emptyLinePlaceholder":358},[1055],{"type":39,"value":361},{"type":25,"tag":172,"props":1057,"children":1058},{"class":174,"line":212},[1059],{"type":25,"tag":172,"props":1060,"children":1061},{"style":179},[1062],{"type":39,"value":1063},"    function sendMessage() {\n",{"type":25,"tag":172,"props":1065,"children":1066},{"class":174,"line":222},[1067],{"type":25,"tag":172,"props":1068,"children":1069},{"style":179},[1070],{"type":39,"value":1071},"      const message = messageInput.value.trim();\n",{"type":25,"tag":172,"props":1073,"children":1074},{"class":174,"line":231},[1075],{"type":25,"tag":172,"props":1076,"children":1077},{"style":179},[1078],{"type":39,"value":1079},"      if (message) {\n",{"type":25,"tag":172,"props":1081,"children":1082},{"class":174,"line":480},[1083],{"type":25,"tag":172,"props":1084,"children":1085},{"style":179},[1086],{"type":39,"value":1087},"        console.log('Sending message:', message);\n",{"type":25,"tag":172,"props":1089,"children":1090},{"class":174,"line":489},[1091],{"type":25,"tag":172,"props":1092,"children":1093},{"style":179},[1094],{"type":39,"value":1095},"        // emiting message to the server\n",{"type":25,"tag":172,"props":1097,"children":1098},{"class":174,"line":554},[1099],{"type":25,"tag":172,"props":1100,"children":1101},{"style":179},[1102],{"type":39,"value":1103},"        socket.emit(\"chat-message\", message);\n",{"type":25,"tag":172,"props":1105,"children":1106},{"class":174,"line":593},[1107],{"type":25,"tag":172,"props":1108,"children":1109},{"style":179},[1110],{"type":39,"value":1111},"        // Add message to messages div\n",{"type":25,"tag":172,"props":1113,"children":1114},{"class":174,"line":601},[1115],{"type":25,"tag":172,"props":1116,"children":1117},{"style":179},[1118],{"type":39,"value":1119},"  \n",{"type":25,"tag":172,"props":1121,"children":1122},{"class":174,"line":610},[1123],{"type":25,"tag":172,"props":1124,"children":1125},{"style":179},[1126],{"type":39,"value":1127},"      }\n",{"type":25,"tag":172,"props":1129,"children":1130},{"class":174,"line":669},[1131],{"type":25,"tag":172,"props":1132,"children":1133},{"style":179},[1134],{"type":39,"value":1135},"    }\n",{"type":25,"tag":172,"props":1137,"children":1138},{"class":174,"line":716},[1139],{"type":25,"tag":172,"props":1140,"children":1141},{"emptyLinePlaceholder":358},[1142],{"type":39,"value":361},{"type":25,"tag":172,"props":1144,"children":1145},{"class":174,"line":725},[1146],{"type":25,"tag":172,"props":1147,"children":1148},{"style":179},[1149],{"type":39,"value":1150},"    // listening for the message from the server :auto receive the message\n",{"type":25,"tag":172,"props":1152,"children":1153},{"class":174,"line":771},[1154],{"type":25,"tag":172,"props":1155,"children":1156},{"style":179},[1157],{"type":39,"value":1158},"    socket.on(\"chat-message\", (message) => {\n",{"type":25,"tag":172,"props":1160,"children":1161},{"class":174,"line":780},[1162],{"type":25,"tag":172,"props":1163,"children":1164},{"style":179},[1165],{"type":39,"value":1166},"      console.log(\"üöÄ Message Received From Server\", message);\n",{"type":25,"tag":172,"props":1168,"children":1169},{"class":174,"line":788},[1170],{"type":25,"tag":172,"props":1171,"children":1172},{"style":179},[1173],{"type":39,"value":1174},"      // Add message to messages div\n",{"type":25,"tag":172,"props":1176,"children":1177},{"class":174,"line":797},[1178],{"type":25,"tag":172,"props":1179,"children":1180},{"style":179},[1181],{"type":39,"value":1182},"      const messageElement = document.createElement('div');\n",{"type":25,"tag":172,"props":1184,"children":1185},{"class":174,"line":847},[1186],{"type":25,"tag":172,"props":1187,"children":1188},{"style":179},[1189],{"type":39,"value":1190},"      messageElement.className = 'message';\n",{"type":25,"tag":172,"props":1192,"children":1193},{"class":174,"line":884},[1194],{"type":25,"tag":172,"props":1195,"children":1196},{"style":179},[1197],{"type":39,"value":1198},"      messageElement.textContent = message;\n",{"type":25,"tag":172,"props":1200,"children":1201},{"class":174,"line":892},[1202],{"type":25,"tag":172,"props":1203,"children":1204},{"style":179},[1205],{"type":39,"value":1206},"      messagesDiv.appendChild(messageElement);\n",{"type":25,"tag":172,"props":1208,"children":1210},{"class":174,"line":1209},24,[1211],{"type":25,"tag":172,"props":1212,"children":1213},{"style":179},[1214],{"type":39,"value":1215},"      // Auto scroll to bottom\n",{"type":25,"tag":172,"props":1217,"children":1219},{"class":174,"line":1218},25,[1220],{"type":25,"tag":172,"props":1221,"children":1222},{"style":179},[1223],{"type":39,"value":1224},"      messagesDiv.scrollTop = messagesDiv.scrollHeight;\n",{"type":25,"tag":172,"props":1226,"children":1228},{"class":174,"line":1227},26,[1229],{"type":25,"tag":172,"props":1230,"children":1231},{"emptyLinePlaceholder":358},[1232],{"type":39,"value":361},{"type":25,"tag":172,"props":1234,"children":1236},{"class":174,"line":1235},27,[1237],{"type":25,"tag":172,"props":1238,"children":1239},{"style":179},[1240],{"type":39,"value":1241},"      // Clear input\n",{"type":25,"tag":172,"props":1243,"children":1245},{"class":174,"line":1244},28,[1246],{"type":25,"tag":172,"props":1247,"children":1248},{"style":179},[1249],{"type":39,"value":1250},"      messageInput.value = '';\n",{"type":25,"tag":172,"props":1252,"children":1254},{"class":174,"line":1253},29,[1255],{"type":25,"tag":172,"props":1256,"children":1257},{"style":179},[1258],{"type":39,"value":1259},"    });\n",{"type":25,"tag":26,"props":1261,"children":1262},{},[1263,1265,1271,1273,1278,1280,1286,1288,1293],{"type":39,"value":1264},"So, if you look above, you will see that you have one active connection with the CDN in the HTML part. When you type and send a message in the ",{"type":25,"tag":74,"props":1266,"children":1268},{"className":1267},[],[1269],{"type":39,"value":1270},"sendMessage",{"type":39,"value":1272}," function, you emit a message to the server. You can see that the same event name, ",{"type":25,"tag":74,"props":1274,"children":1276},{"className":1275},[],[1277],{"type":39,"value":637},{"type":39,"value":1279},", is used here. Now, you can see one more ",{"type":25,"tag":74,"props":1281,"children":1283},{"className":1282},[],[1284],{"type":39,"value":1285},".on",{"type":39,"value":1287}," event, as we've seen in the server code. This event gets fired automatically when the server emits it. In that ",{"type":25,"tag":74,"props":1289,"children":1291},{"className":1290},[],[1292],{"type":39,"value":1285},{"type":39,"value":1294}," message, we are just appending the received message to the HTML. Now, let's see the console to understand how it works.",{"type":25,"tag":72,"props":1296,"children":1298},{"id":1297},"inspection",[1299],{"type":39,"value":1300},"Inspection",{"type":25,"tag":26,"props":1302,"children":1303},{},[1304,1306,1310,1312,1317],{"type":39,"value":1305},"Let's check the browser's dev tools. When you first visit ",{"type":25,"tag":99,"props":1307,"children":1308},{"href":101},[1309],{"type":39,"value":104},{"type":39,"value":1311},", in the screenshot below, you can see ",{"type":25,"tag":74,"props":1313,"children":1315},{"className":1314},[],[1316],{"type":39,"value":63},{"type":39,"value":1318},", where the HTTPS connection gets upgraded to WebSocket. This connection is long-lived until either party disconnects.",{"type":25,"tag":26,"props":1320,"children":1321},{},[1322],{"type":25,"tag":30,"props":1323,"children":1325},{"alt":32,"src":1324},"https://heyashu.in/images/blogs/ws_4.png",[],{"type":25,"tag":26,"props":1327,"children":1328},{},[1329],{"type":39,"value":1330},"If you switch to the messages tab and then send a message from the UI, you will see the message count and the actual message in the screenshot below. Now, notice that this is a WebSocket connection, not an HTTPS connection anymore.",{"type":25,"tag":26,"props":1332,"children":1333},{},[1334],{"type":25,"tag":30,"props":1335,"children":1337},{"alt":32,"src":1336},"https://heyashu.in/images/blogs/ws_5.png",[],{"type":25,"tag":26,"props":1339,"children":1340},{},[1341],{"type":39,"value":1342},"Now, the question arises: is this really worth it? You‚Äôre sending messages to everyone, so how does exclusivity work? Yes, this is not limited‚ÄîWebSocket is vast. You can create rooms, send requests to only one user (one-to-one connection), group connections, and more. This was just an overview, so keep exploring and learning.",{"type":25,"tag":26,"props":1344,"children":1345},{},[1346,1348,1354,1356,1362,1364,1370,1371,1377],{"type":39,"value":1347},"Remember: as the web has ",{"type":25,"tag":74,"props":1349,"children":1351},{"className":1350},[],[1352],{"type":39,"value":1353},"https",{"type":39,"value":1355}," and ",{"type":25,"tag":74,"props":1357,"children":1359},{"className":1358},[],[1360],{"type":39,"value":1361},"http",{"type":39,"value":1363},", similarly with WebSockets, you have ",{"type":25,"tag":74,"props":1365,"children":1367},{"className":1366},[],[1368],{"type":39,"value":1369},"ws://",{"type":39,"value":1355},{"type":25,"tag":74,"props":1372,"children":1374},{"className":1373},[],[1375],{"type":39,"value":1376},"wss://",{"type":39,"value":142},{"type":25,"tag":26,"props":1379,"children":1380},{},[1381],{"type":39,"value":1382},"There is also a concept of framing, where we send data in chunks.",{"type":25,"tag":72,"props":1384,"children":1386},{"id":1385},"use-cases",[1387],{"type":39,"value":1388},"Use Cases",{"type":25,"tag":84,"props":1390,"children":1391},{},[1392,1397,1402,1407,1412],{"type":25,"tag":88,"props":1393,"children":1394},{},[1395],{"type":39,"value":1396},"Chat apps",{"type":25,"tag":88,"props":1398,"children":1399},{},[1400],{"type":39,"value":1401},"Analytics",{"type":25,"tag":88,"props":1403,"children":1404},{},[1405],{"type":39,"value":1406},"Financial trading",{"type":25,"tag":88,"props":1408,"children":1409},{},[1410],{"type":39,"value":1411},"Online gaming",{"type":25,"tag":88,"props":1413,"children":1414},{},[1415],{"type":39,"value":1416},"Collaborations",{"type":25,"tag":72,"props":1418,"children":1420},{"id":1419},"challenges",[1421],{"type":39,"value":1422},"Challenges",{"type":25,"tag":84,"props":1424,"children":1425},{},[1426,1431,1436,1441,1446,1451,1456,1461,1466,1471],{"type":25,"tag":88,"props":1427,"children":1428},{},[1429],{"type":39,"value":1430},"It uses a lot of resources based on the number of users due to long-lived connections.",{"type":25,"tag":88,"props":1432,"children":1433},{},[1434],{"type":39,"value":1435},"Connection limits.",{"type":25,"tag":88,"props":1437,"children":1438},{},[1439],{"type":39,"value":1440},"Strict sessions (read about load balancers‚ÄîGoogle it).",{"type":25,"tag":88,"props":1442,"children":1443},{},[1444],{"type":39,"value":1445},"Authentication can be a challenge (example it).",{"type":25,"tag":88,"props":1447,"children":1448},{},[1449],{"type":39,"value":1450},"Cache layers.",{"type":25,"tag":88,"props":1452,"children":1453},{},[1454],{"type":39,"value":1455},"Scaling issues (not as good as long-polling and short-polling).",{"type":25,"tag":88,"props":1457,"children":1458},{},[1459],{"type":39,"value":1460},"Testing and debugging.",{"type":25,"tag":88,"props":1462,"children":1463},{},[1464],{"type":39,"value":1465},"Backward compatibility: what if the connection gets disturbed?",{"type":25,"tag":88,"props":1467,"children":1468},{},[1469],{"type":39,"value":1470},"Resource cleanup.",{"type":25,"tag":88,"props":1472,"children":1473},{},[],{"type":25,"tag":26,"props":1475,"children":1476},{},[1477],{"type":39,"value":1478},"Now, that's all for this blog. See you in the next one!",{"type":25,"tag":26,"props":1480,"children":1481},{},[1482],{"type":39,"value":1483},"Also checkout :",{"type":25,"tag":84,"props":1485,"children":1486},{},[1487,1499,1511],{"type":25,"tag":88,"props":1488,"children":1489},{},[1490],{"type":25,"tag":59,"props":1491,"children":1492},{},[1493],{"type":25,"tag":99,"props":1494,"children":1496},{"href":1495},"https://heyashu.in/digital-garden/notes/front-end-design-system/how-the-web-works",[1497],{"type":39,"value":1498},"How the web works",{"type":25,"tag":88,"props":1500,"children":1501},{},[1502],{"type":25,"tag":59,"props":1503,"children":1504},{},[1505],{"type":25,"tag":99,"props":1506,"children":1508},{"href":1507},"https://heyashu.in/digital-garden/notes/front-end-design-system/communication-protocols",[1509],{"type":39,"value":1510},"Communication Protocols",{"type":25,"tag":88,"props":1512,"children":1513},{},[1514],{"type":25,"tag":59,"props":1515,"children":1516},{},[1517],{"type":25,"tag":99,"props":1518,"children":1520},{"href":1519},"https://heyashu.in/digital-garden/notes/front-end-design-system/http-headers-methods-status-codes-and-rest-api-deep-dive",[1521],{"type":39,"value":1522},"HTTP Headers Methods Status Codes",{"type":25,"tag":26,"props":1524,"children":1525},{},[1526],{"type":39,"value":1527},"So that's all for this article. Let's meet in the next one.  Take care, bye-bye!",{"type":25,"tag":26,"props":1529,"children":1530},{},[1531],{"type":39,"value":1532},"Thank you so much for reading. If you found it valuable, consider subscribing for more such content every week. If you have any questions or suggestions, please email me your comments or feel free to improve it.",{"type":25,"tag":26,"props":1534,"children":1535},{},[1536],{"type":39,"value":1537},"I am waiting for your feedback, See you in next episode,",{"type":25,"tag":26,"props":1539,"children":1540},{},[1541],{"type":39,"value":1542},"Thanks üëãüèª",{"type":25,"tag":1544,"props":1545,"children":1546},"style",{},[1547],{"type":39,"value":1548},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":185,"depth":185,"links":1550},[1551,1552,1554,1555,1556,1557,1558,1559],{"id":74,"depth":194,"text":77},{"id":114,"depth":194,"text":1553},"Socket.io / WebSockets",{"id":285,"depth":194,"text":288},{"id":901,"depth":194,"text":904},{"id":912,"depth":194,"text":915},{"id":1297,"depth":194,"text":1300},{"id":1385,"depth":194,"text":1388},{"id":1419,"depth":194,"text":1422},"content:articles:frontend-system-design-2-3.md","content","articles/frontend-system-design-2-3.md","articles/frontend-system-design-2-3","md",{"loc":4},1758006227339]