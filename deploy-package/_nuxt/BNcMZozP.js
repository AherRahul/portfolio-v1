import{d as ee,l as p,x as Q,c,o as i,g as t,a as j,h as n,e as x,i as te,t as a,a8 as se,w as g,W as le,n as z,F as P,r as S,b as G,a1 as $,a3 as R}from"./KV6SHEl7.js";import{u as oe,d as ne}from"./DeRmHjYj.js";import"./D9I8w32T.js";import"./CZszh3iH.js";import"./Zk_9NUJY.js";import"./CFlqv7pY.js";import"./NufbNLrP.js";import"./CxYJgpPD.js";import"./OZgRIoHx.js";import"./tAtTO3w9.js";import"./BLWyFmBm.js";import"./DNsBBiwM.js";import"./C1Gmjfje.js";import"./CHTPkabH.js";const re={class:"w-full max-w-4xl mx-auto"},ae={class:"bg-gradient-to-r from-zinc-800 to-zinc-900 p-6 border-l-4 border-red-500 mb-6"},ie={class:"flex items-center justify-between"},ce={class:"text-2xl font-bold text-white flex items-center gap-3"},ue={class:"text-zinc-300 mt-1"},de={key:0,class:"text-right"},ve={class:"text-sm text-zinc-400"},me={class:"w-32 bg-zinc-700 h-2 mt-1"},fe={key:0,class:"bg-zinc-800 p-8 text-center"},pe={key:1,class:"bg-red-900/20 border border-red-500/50 p-6"},xe={class:"flex items-center gap-3 mb-3"},he={class:"text-red-300 mb-4"},be={key:2,class:"bg-zinc-800 p-8 text-center"},ge={class:"flex flex-wrap gap-4 justify-center mb-6 text-sm"},we={class:"flex items-center gap-2 text-zinc-400"},ye={class:"flex items-center gap-2 text-zinc-400"},_e={class:"flex items-center gap-2 text-zinc-400"},ze={key:3,class:"space-y-6"},ke={class:"bg-zinc-800 p-6"},Ce={class:"flex items-start justify-between mb-4"},Ae={class:"flex-1"},Qe={class:"flex items-center gap-3 mb-3"},Te={class:"w-8 h-8 bg-red-500 text-white font-bold flex items-center justify-center text-sm"},qe={class:"text-sm uppercase tracking-wide text-zinc-400"},je={class:"text-xl font-semibold text-white leading-relaxed"},Ge={key:0,class:"space-y-3 mt-6"},Le=["onClick"],Ie={class:"flex items-center gap-3"},Be={key:1,class:"mt-6"},De={key:2,class:"mt-6"},Ve={class:"flex items-center justify-between mt-8 pt-6 border-t border-zinc-700"},Ee={key:1},Fe={key:4,class:"space-y-6"},Ne={class:"bg-gradient-to-r from-zinc-800 to-zinc-900 p-8 text-center"},Pe={class:"mb-6"},Se={class:"text-zinc-300"},$e={class:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center"},Re={class:"space-y-4"},Oe={class:"flex items-start gap-4"},Ye={class:"flex-1"},Me={class:"text-lg font-semibold text-white mb-3"},Ue={class:"mb-4"},We={class:"text-white"},Ke={class:"mb-4"},He={class:"p-3 bg-green-900/20 border-l-4 border-green-500"},Je={class:"text-green-300"},Xe={class:"bg-zinc-700/50 p-4"},Ze={class:"text-sm text-zinc-400 mb-2 flex items-center gap-2"},et={class:"text-zinc-300 leading-relaxed"},tt={class:"text-center"},st={class:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center"},ht=ee({__name:"Container",props:{topicTitle:{},content:{},difficulty:{},questionCount:{},preGeneratedQuestions:{}},setup(O){const m=O,A=p(!1),w=p(!1),B=p(!1),h=p(0),f=p([]),u=p([]),_=p(!1),T=p(""),d=p([]),k=p(""),C=p(""),l=Q(()=>f.value[h.value]),Y=Q(()=>(h.value+1)/f.value.length*100),L=Q(()=>h.value===f.value.length-1),M=Q(()=>{if(!l.value)return!1;switch(l.value.type){case"single-choice":case"multiple-choice":case"true-false":return d.value.length>0;case"fill-blank":return k.value.trim().length>0;case"short-answer":return C.value.trim().length>0;default:return!1}}),q=Q(()=>{const s=u.value.filter(e=>e.isCorrect).length;return Math.round(s/u.value.length*100)});async function D(){var e;if(m.preGeneratedQuestions&&m.preGeneratedQuestions.length>0){f.value=m.preGeneratedQuestions,w.value=!0;return}A.value=!0,T.value="";const{makeApiCall:s}=oe();try{const o=await s("/api/quiz/generate",{method:"POST",body:{content:m.content,topicTitle:m.topicTitle,difficulty:m.difficulty||"medium",questionCount:m.questionCount||10}});f.value=o.questions,w.value=!0}catch(o){T.value=((e=o.data)==null?void 0:e.message)||"Failed to generate quiz. Please try again.",console.error("Quiz generation failed:",o)}finally{A.value=!1}}function U(){m.preGeneratedQuestions&&m.preGeneratedQuestions.length>0?(f.value=m.preGeneratedQuestions,w.value=!0):f.value.length===0?D():w.value=!0}function W(){w.value=!1,B.value=!1,_.value=!1,h.value=0,u.value=[],I()}function I(){d.value=[],k.value="",C.value=""}function K(s){if(l.value){if(l.value.type==="single-choice"||l.value.type==="true-false")d.value=[s];else if(l.value.type==="multiple-choice"){const e=d.value.indexOf(s);e>-1?d.value.splice(e,1):d.value.push(s)}}}function H(){if(!l.value)return!1;let s=[],e=!1;switch(l.value.type){case"single-choice":case"multiple-choice":s=[...d.value],e=Z(s.sort(),l.value.correctAnswers.sort());break;case"true-false":s=[...d.value],e=s[0]==="True"===l.value.correctAnswers[0];break;case"fill-blank":s=[k.value.trim()],e=l.value.correctAnswers.some(b=>s[0].toLowerCase().includes(b.toLowerCase())||b.toLowerCase().includes(s[0].toLowerCase()));break;case"short-answer":s=[C.value.trim()];const r=l.value.correctAnswers[0].toLowerCase().split(" "),y=s[0].toLowerCase();e=r.some(b=>y.includes(b)&&b.length>2);break}return e}function J(){if(!l.value)return;const s=H();let e=[];switch(l.value.type){case"single-choice":case"multiple-choice":case"true-false":e=[...d.value];break;case"fill-blank":e=[k.value.trim()];break;case"short-answer":e=[C.value.trim()];break}u.value.push({questionId:l.value.id,answers:e,isCorrect:s}),L.value?(B.value=!0,_.value=!0):(h.value++,I())}function X(){h.value>0&&(h.value--,u.value=u.value.filter(s=>{var e;return s.questionId!==((e=l.value)==null?void 0:e.id)}),I())}function Z(s,e){return s.length===e.length&&s.every((o,v)=>o===e[v])}function V(s){switch(s){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-zinc-400"}}async function E(){if(!(!f.value.length||!u.value.length))try{await ne(m.topicTitle,f.value,u.value,q.value)}catch(s){console.error("Error downloading quiz analysis PDF:",s)}}return(s,e)=>{const o=te,v=le;return i(),c("div",re,[t("div",ae,[t("div",ie,[t("div",null,[t("h2",ce,[n(o,{name:"heroicons:academic-cap",class:"text-red-400"}),e[4]||(e[4]=x(" AI Generated Quiz ",-1))]),t("p",ue,a(s.topicTitle),1)]),w.value&&!_.value?(i(),c("div",de,[t("div",ve,"Question "+a(h.value+1)+" of "+a(f.value.length),1),t("div",me,[t("div",{class:"bg-gradient-to-r from-red-500 to-pink-600 h-2 transition-all duration-300",style:se({width:`${Y.value}%`})},null,4)])])):j("",!0)])]),A.value?(i(),c("div",fe,[n(o,{name:"heroicons:arrow-path",class:"animate-spin text-4xl text-red-400 mx-auto mb-4"}),e[5]||(e[5]=t("h3",{class:"text-xl font-semibold text-white mb-2"},"Generating Quiz...",-1)),e[6]||(e[6]=t("p",{class:"text-zinc-400"},"Our AI is analyzing the content to create personalized questions for you.",-1))])):T.value?(i(),c("div",pe,[t("div",xe,[n(o,{name:"heroicons:exclamation-triangle",class:"text-red-400 text-2xl"}),e[7]||(e[7]=t("h3",{class:"text-xl font-semibold text-red-400"},"Error",-1))]),t("p",he,a(T.value),1),n(v,{onClick:D,disabled:A.value},{default:g(()=>[n(o,{name:"heroicons:arrow-path",class:"mr-2"}),e[8]||(e[8]=x(" Try Again ",-1))]),_:1},8,["disabled"])])):w.value?w.value&&!_.value&&l.value?(i(),c("div",ze,[t("div",ke,[t("div",Ce,[t("div",Ae,[t("div",Qe,[t("span",Te,a(h.value+1),1),t("span",qe,a(l.value.type.replace("-"," ")),1),t("span",{class:z(["text-sm",V(l.value.difficulty)])},a(l.value.difficulty),3)]),t("h3",je,a(l.value.question),1)])]),["single-choice","multiple-choice","true-false"].includes(l.value.type)?(i(),c("div",Ge,[(i(!0),c(P,null,S(l.value.options,(r,y)=>(i(),c("button",{key:y,onClick:b=>K(r),class:z(["w-full text-left p-4 border transition-all duration-200 hover:border-red-500/50",[d.value.includes(r)?"bg-red-500/20 border-red-500 text-white":"bg-zinc-700 border-zinc-600 text-zinc-300 hover:bg-zinc-600"]])},[t("div",Ie,[t("div",{class:z(["w-5 h-5 border-2 flex items-center justify-center transition-colors",[d.value.includes(r)?"border-red-500 bg-red-500":"border-zinc-500",(l.value.type==="single-choice"||l.value.type==="true-false","")]])},[d.value.includes(r)?(i(),G(o,{key:0,name:"heroicons:check",class:"text-white text-xs"})):j("",!0)],2),t("span",null,a(r),1)])],10,Le))),128))])):l.value.type==="fill-blank"?(i(),c("div",Be,[$(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>k.value=r),type:"text",placeholder:"Type your answer here...",class:"w-full p-4 bg-zinc-700 border border-zinc-600 text-white placeholder-zinc-400 focus:border-red-500 focus:outline-none transition-colors"},null,512),[[R,k.value]])])):l.value.type==="short-answer"?(i(),c("div",De,[$(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=r=>C.value=r),placeholder:"Write your answer here...",rows:"4",class:"w-full p-4 bg-zinc-700 border border-zinc-600 text-white placeholder-zinc-400 focus:border-red-500 focus:outline-none transition-colors resize-none"},null,512),[[R,C.value]])])):j("",!0),t("div",Ve,[h.value>0?(i(),G(v,{key:0,look:"secondary",onClick:X},{default:g(()=>[n(o,{name:"heroicons:chevron-left",class:"mr-1"}),e[13]||(e[13]=x(" Previous ",-1))]),_:1})):(i(),c("div",Ee)),n(v,{onClick:J,disabled:!M.value,class:"ml-auto"},{default:g(()=>[x(a(L.value?"Finish Quiz":"Next")+" ",1),L.value?(i(),G(o,{key:1,name:"heroicons:check",class:"ml-1"})):(i(),G(o,{key:0,name:"heroicons:chevron-right",class:"ml-1"}))]),_:1},8,["disabled"])])])])):_.value?(i(),c("div",Fe,[t("div",Ne,[t("div",Pe,[t("div",{class:z(["w-24 h-24 mx-auto mb-4 rounded-full border-4 flex items-center justify-center text-3xl font-bold",[q.value>=80?"border-green-400 text-green-400":q.value>=60?"border-yellow-400 text-yellow-400":"border-red-400 text-red-400"]])},a(q.value)+"% ",3),e[14]||(e[14]=t("h3",{class:"text-2xl font-bold text-white mb-2"},"Quiz Completed!",-1)),t("p",Se," You scored "+a(u.value.filter(r=>r.isCorrect).length)+" out of "+a(u.value.length)+" questions correctly. ",1)]),t("div",$e,[n(v,{onClick:W,look:"secondary",class:"text-sm sm:text-base"},{default:g(()=>[n(o,{name:"heroicons:arrow-path",class:"mr-2"}),e[15]||(e[15]=x(" Retake Quiz ",-1))]),_:1}),n(v,{onClick:e[2]||(e[2]=r=>_.value=!1),class:"text-sm sm:text-base"},{default:g(()=>[n(o,{name:"heroicons:eye",class:"mr-2"}),e[16]||(e[16]=x(" Review Answers ",-1))]),_:1}),n(v,{onClick:E,look:"secondary",class:"text-sm sm:text-base"},{default:g(()=>[n(o,{name:"heroicons:arrow-down-tray",class:"mr-2"}),e[17]||(e[17]=x(" Download Analysis ",-1))]),_:1})])]),t("div",Re,[(i(!0),c(P,null,S(f.value,(r,y)=>{var b,F,N;return i(),c("div",{key:r.id,class:"bg-zinc-800 p-6"},[t("div",Oe,[t("div",{class:z(["w-8 h-8 flex items-center justify-center text-sm font-bold",[(b=u.value[y])!=null&&b.isCorrect?"bg-green-500 text-white":"bg-red-500 text-white"]])},a(y+1),3),t("div",Ye,[t("h4",Me,a(r.question),1),t("div",Ue,[e[18]||(e[18]=t("div",{class:"text-sm text-zinc-400 mb-1"},"Your Answer:",-1)),t("div",{class:z(["p-3 bg-zinc-700 border-l-4",(F=u.value[y])!=null&&F.isCorrect?"border-green-500":"border-red-500"])},[t("span",We,a(((N=u.value[y])==null?void 0:N.answers.join(", "))||"No answer"),1)],2)]),t("div",Ke,[e[19]||(e[19]=t("div",{class:"text-sm text-zinc-400 mb-1"},"Correct Answer:",-1)),t("div",He,[t("span",Je,a(Array.isArray(r.correctAnswers)?r.correctAnswers.join(", "):r.correctAnswers),1)])]),t("div",Xe,[t("div",Ze,[n(o,{name:"heroicons:light-bulb"}),e[20]||(e[20]=x(" Explanation ",-1))]),t("p",et,a(r.explanation),1)])])])])}),128))]),t("div",tt,[t("div",st,[n(v,{onClick:e[3]||(e[3]=r=>_.value=!0),look:"secondary",class:"text-sm sm:text-base"},{default:g(()=>[n(o,{name:"heroicons:chart-bar",class:"mr-2"}),e[21]||(e[21]=x(" Back to Summary ",-1))]),_:1}),n(v,{onClick:E,class:"text-sm sm:text-base"},{default:g(()=>[n(o,{name:"heroicons:arrow-down-tray",class:"mr-2"}),e[22]||(e[22]=x(" Download Analysis ",-1))]),_:1})])])])):j("",!0):(i(),c("div",be,[n(o,{name:"heroicons:play",class:"text-6xl text-red-400 mx-auto mb-6"}),e[11]||(e[11]=t("h3",{class:"text-2xl font-bold text-white mb-4"},"Ready to Test Your Knowledge?",-1)),e[12]||(e[12]=t("p",{class:"text-zinc-300 mb-6 max-w-2xl mx-auto"}," Take this AI-generated quiz based on the content you just read. The quiz includes various question types to thoroughly test your understanding of the topic. ",-1)),t("div",ge,[t("div",we,[n(o,{name:"heroicons:clock"}),t("span",null,a(s.questionCount||10)+" Questions",1)]),t("div",ye,[n(o,{name:"heroicons:chart-bar"}),t("span",{class:z(["capitalize",V(s.difficulty||"medium")])},a(s.difficulty||"medium")+" Level",3)]),t("div",_e,[n(o,{name:"heroicons:light-bulb"}),e[9]||(e[9]=t("span",null,"AI Generated",-1))])]),n(v,{onClick:U,disabled:A.value,class:"px-8 py-3"},{default:g(()=>[n(o,{name:"heroicons:play",class:"mr-2"}),e[10]||(e[10]=x(" Start Quiz ",-1))]),_:1},8,["disabled"])]))])}}});export{ht as default};
